namespace GeoBuf;

enum InnerObjectKind:ubyte {
  Unknown = 0,
  Point = 1,
  LineString = 2,
  Polygon = 3,
  MultiPoint = 4,
  MultiLineString = 5,
  MultiPolygon = 6,
  Collection = 7,
}

table InnerObject {
  // https://flatbuffers.dev/flatbuffers_internals.html
  // FlexBuffers Typed Vectors short than Flatbuffers [uint32]
  point_offsets: [ubyte] (flexbuffer); // TYPE_VECTOR_UINT
  ring_offsets: [ubyte] (flexbuffer); // TYPE_VECTOR_UINT

  collection: [InnerObject];

  wkb_type: InnerObjectKind;
  properties: [Property];
}

table Property {
  name: string;
  value: [ubyte] (flexbuffer);
}

table Object {
  point_offsets: [ubyte] (flexbuffer); // TYPE_VECTOR_UINT
  ring_offsets: [ubyte] (flexbuffer); // TYPE_VECTOR_UINT

  collection: [InnerObject];

  srid: uint32;

  // For GeoJSON compatibility
  properties: [Property];
}
 
root_type Object;
