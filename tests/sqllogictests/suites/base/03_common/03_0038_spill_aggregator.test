onlyif http
statement ok
set max_threads = 8;

onlyif http
statement ok
SET query_out_of_memory_behavior = 'EnableSpill';

onlyif http
statement ok
SET max_query_memory_usage = 1024 * 1024 * 1;

onlyif http
query T
SELECT COUNT() FROM (SELECT number::string, count() FROM numbers_mt(100000) group by number::string);
----
100000

onlyif http
query T
SELECT COUNT() FROM (SELECT number::string FROM numbers_mt(100000) group by number::string);
----
100000

statement ok
create or replace table t2  as select number, max(number) from numbers(10000000) group by number order by number desc limit 3

statement ok
drop table t2

onlyif http
statement ok
unset max_threads;

onlyif http
statement ok
unset max_query_memory_usage;

onlyif http
statement ok
unset query_out_of_memory_behavior;
